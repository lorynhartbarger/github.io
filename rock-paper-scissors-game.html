<!DOCTYPE html>
<html lang="en">

<head>
    <title>Let's Play Rock Paper Scissors!</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <meta name="description" content="This game was built by Loryn Hartbarger using JavaScript, HTML, and CSS">
    <link rel="stylesheet" href="rps-style.css">
</head>
<header>
  Rock Paper Scissors 
</header>
<p class="created-by"> Created by Loryn Hartbarger</p>
<body>
  <button onclick="playersPick('rock'); playGame('rock','paper','scissors'); hideMoveButtons(); showPlayAgainButton(); hideScore();" class="move-button">
    <img src="images/rock-emoji.png" class="move-icon">
  </button>
  <button onclick="playersPick('paper'); playGame('paper', 'scissors','rock'); hideMoveButtons(); showPlayAgainButton(); hideScore();" class="move-button">
    <img src="images/paper-emoji.png" class="move-icon">
  </button>
  <button onclick="playersPick('scissors'); playGame('scissors','rock','paper'); hideMoveButtons(); showPlayAgainButton(); hideScore();" class="move-button">
    <img src="images/scissors-emoji.png" class="move-icon">
  </button>

  <p class="players-pick">
  </p>
  <p class="computers-pick">
  </p>

  <p class="result js-result"> </p>

  <p class="js-score score"></p>

  <button onclick="playAgain(); clearResult();" class="play-again">Play Again</button>

  <button onclick="
          score.playersScore = 0;
          score.computersScore = 0;
          localStorage.removeItem('score');
          updateScoreElement();
    " class="reset-score">Reset Score </button>

  <script>
  window.addEventListener('beforeunload', function(){
    localStorage.clear();
  });

  let score = JSON.parse(localStorage.getItem('score')) || {
        playersScore: 0,
        computersScore: 0
      };


  function playersPick (playerMove){
    setTimeout(() => { 
    document.querySelector('.players-pick')
    .innerHTML = `You:  <img src="images/${playerMove}-emoji.png" class="move-icon">`;
    },500);
  };


  function playGame (playersPick, computerMoveWins, computerMoveLoses){
    const randomNumber = Math.random();
    let computersPick = '';
    let addPlayerScore='';
    let addComputerScore='';
    if(randomNumber >= 0 && randomNumber < 1/3){
        computersPick = 'rock';
        } else if (randomNumber >= 1/3 && randomNumber < 2/3) {
        computersPick = 'paper';
        } else if (randomNumber>= 2/3){
        computersPick = 'scissors';
        };
    setTimeout(() => { 
    document.querySelector('.computers-pick')
    .innerHTML = `Computers:  <img src="images/${computersPick}-emoji.png" class="move-icon">`;
    },1000);
    let result = '';
    if(computersPick === playersPick) {
          result = `It\'s a Tie...`
          addPlayerScore = 0;
          addComputerScore = 0;
        } else if (computersPick === computerMoveWins) {
          result = 'You LOST!'
          addPlayerScore = 0;
          addComputerScore = 1;
        } else if(computersPick === computerMoveLoses){
          result = `You Win!!`
          addPlayerScore = 1;
          addComputerScore = 0; 
        }
    setTimeout(() => {
    addScoreElement(addPlayerScore,addComputerScore);
    },2000);
    setTimeout(() => {
    document.querySelector('.js-result').innerHTML = result;
    },1500);
  };

  function hideMoveButtons(){
    const moveButtons = document.querySelectorAll('.move-button');
    moveButtons.forEach(button => {
      button.style.display = 'none';
    });
  };

  function showPlayAgainButton(){
    const playAgainButton = document.querySelector('.play-again');
    setTimeout(() => {
    playAgainButton.style.display = 'inline-block';
    }, 2500);
  };



  function playAgain(){
    const moveButtons = document.querySelectorAll('.move-button');
    moveButtons.forEach(button => {
      button.style.display = 'inline-block';
    });
   // const gameResult = document.querySelector('.js-result');
    const playersMove = document.querySelector('.players-pick');
    const computersMove = document.querySelector('.computers-pick');

    playersMove.innerHTML = ''; 
    computersMove.innerHTML = ''; 
    playersMove.style.display = 'block'; 
    computersMove.style.display = 'block'; 
    const playAgainButton = document.querySelector('.play-again');
    playAgainButton.style.display = 'none';
    
  };

  function clearResult(){
    const currentResult = document.querySelector('.js-result');
    currentResult.innerHTML = '';
    clearResult.style.display = 'block';
  };
 

  function addScoreElement(addPlayerScore, addComputerScore) {
    score.playersScore += addPlayerScore;
    score.computersScore += addComputerScore;
    document.querySelector('.js-score')
      .innerHTML = `The score of the game is Player: ${score.playersScore} to Computer: ${score.computersScore}`;
    localStorage.setItem('score', JSON.stringify(score));
  };

  function hideScore(){
    const currentScore = document.querySelector('.js-score');
    currentScore.innerHTML = '';
    hideScore.style.display = 'block';
  };

  function updateScoreElement (){
        document.querySelector('.js-score')
          .innerHTML = `The score of the game is Player: ${score.playersScore} to Computer: ${score.computersScore} `;
      };

  </script>
 

</body>
</html>